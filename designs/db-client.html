<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Candidate Dashboard • Space42</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">

  <style>
    :root{
      /* Light + Blue (modern, clean) */
      --bg: #f6f9ff;
      --panel: rgba(255,255,255,.78);
      --panel2: rgba(255,255,255,.92);
      --border: rgba(15, 23, 42, .10);
      --border2: rgba(15, 23, 42, .14);

      --text: rgba(15,23,42,.92);
      --muted: rgba(15,23,42,.60);

      --blue:#2563eb;
      --sky:#38bdf8;
      --blue2:#1d4ed8;

      --ok:#16a34a;
      --warn:#f59e0b;
      --bad:#ef4444;

      --shadow: 0 18px 60px rgba(37,99,235,.10);
      --shadow2: 0 10px 28px rgba(2,6,23,.08);

      --r12:12px;
      --r14:14px;
      --r18:18px;
      --r22:22px;

      --font:'Poppins', ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
    }

    *{ margin:0; padding:0; box-sizing:border-box; font-family:var(--font); }
    html,body{ height:100%; }
    body{
      color: var(--text);
      background:
        radial-gradient(900px 520px at 18% 8%, rgba(56,189,248,.22), transparent 60%),
        radial-gradient(820px 520px at 85% 12%, rgba(37,99,235,.16), transparent 58%),
        radial-gradient(900px 620px at 60% 100%, rgba(56,189,248,.14), transparent 55%),
        linear-gradient(180deg, #f7faff 0%, var(--bg) 55%, #f6f9ff 100%);
      overflow-x:hidden;
    }

    .container{ display:flex; min-height:100vh; }

    /* Sidebar */
    .sidebar{
      width: 270px;
      padding: 18px 16px;
      display:flex;
      flex-direction:column;
      background: rgba(255,255,255,.55);
      border-right: 1px solid var(--border);
      backdrop-filter: blur(14px);
    }

    .logo{
      display:flex;
      align-items:center;
      gap:12px;
      padding: 12px 12px;
      border-radius: var(--r18);
      background: linear-gradient(180deg, rgba(255,255,255,.95), rgba(255,255,255,.68));
      border: 1px solid var(--border);
      box-shadow: var(--shadow2);
      margin-bottom: 14px;
    }
    .logo i{
      width:42px; height:42px;
      display:grid; place-items:center;
      border-radius: 14px;
      color: white;
      background:
        radial-gradient(16px 16px at 30% 30%, rgba(255,255,255,.22), transparent 55%),
        linear-gradient(135deg, rgba(37,99,235,.95), rgba(56,189,248,.9));
      box-shadow: 0 14px 30px rgba(37,99,235,.18);
      font-size: 18px;
    }
    .logo h2{
      font-size: 15px;
      font-weight: 900;
      letter-spacing: .2px;
      line-height: 1.1;
    }
    .logo h2 span{
      display:block;
      margin-top: 4px;
      font-size: 12px;
      font-weight: 700;
      color: var(--muted);
    }

    .nav-menu{
      list-style:none;
      padding: 10px 4px;
      display:flex;
      flex-direction:column;
      gap:8px;
      flex:1;
    }
    .nav-menu a{
      display:flex;
      align-items:center;
      gap:10px;
      text-decoration:none;
      color: rgba(15,23,42,.72);
      padding: 11px 12px;
      border-radius: var(--r14);
      border: 1px solid transparent;
      background: transparent;
      transition: transform .15s ease, background .15s ease, border-color .15s ease, color .15s ease;
      font-weight: 700;
      font-size: 13px;
    }
    .nav-menu a i{ width:20px; opacity:.85; }
    .nav-menu a:hover{
      transform: translateY(-1px);
      background: rgba(37,99,235,.06);
      border-color: rgba(37,99,235,.10);
      color: rgba(15,23,42,.92);
    }
    .nav-menu a.active{
      background: linear-gradient(135deg, rgba(37,99,235,.12), rgba(56,189,248,.10));
      border-color: rgba(37,99,235,.20);
      color: rgba(15,23,42,.92);
      box-shadow: 0 10px 24px rgba(37,99,235,.10);
    }

    .user-info{
      padding: 12px;
      border-radius: var(--r18);
      border: 1px solid var(--border);
      background: rgba(255,255,255,.72);
      display:flex;
      align-items:center;
      gap:12px;
      box-shadow: var(--shadow2);
    }
    .user-avatar{
      width:42px; height:42px;
      border-radius: 14px;
      display:grid; place-items:center;
      font-weight: 900;
      color: rgba(37,99,235,.95);
      background: rgba(37,99,235,.10);
      border: 1px solid rgba(37,99,235,.16);
    }
    .user-details h4{ font-size: 13px; font-weight: 900; line-height: 1.1; }
    .user-details p{ font-size: 12px; color: var(--muted); margin-top: 4px; font-weight: 700; }

    /* Main */
    .main-content{
      flex:1;
      padding: 18px;
      overflow:auto;
    }

    .topbar{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      padding: 14px 14px;
      border-radius: var(--r22);
      border: 1px solid var(--border);
      background: rgba(255,255,255,.72);
      backdrop-filter: blur(14px);
      box-shadow: var(--shadow2);
      position: sticky;
      top: 12px;
      z-index: 30;
    }

    .topbar h1{
      font-size: 16px;
      font-weight: 900;
      letter-spacing: .2px;
      line-height: 1.1;
    }
    .topbar h1 span{
      display:block;
      margin-top: 5px;
      font-size: 12px;
      font-weight: 700;
      color: var(--muted);
    }

    .header-actions{
      display:flex;
      align-items:center;
      gap:10px;
    }

    .pill{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding: 8px 10px;
      border-radius: 999px;
      border: 1px solid rgba(37,99,235,.16);
      background: rgba(37,99,235,.06);
      color: rgba(15,23,42,.70);
      font-weight: 800;
      font-size: 12px;
      white-space:nowrap;
      user-select:none;
    }
    .pulse{
      width:8px; height:8px; border-radius:99px;
      background: var(--ok);
      box-shadow: 0 0 0 6px rgba(22,163,74,.16);
      animation: pulse 1.6s ease-in-out infinite;
    }
    @keyframes pulse{
      0%,100%{ transform: scale(1); opacity: 1; }
      50%{ transform: scale(1.12); opacity: .75; }
    }

    .btn{
      border: 1px solid var(--border);
      background: rgba(255,255,255,.80);
      color: rgba(15,23,42,.90);
      padding: 10px 12px;
      border-radius: var(--r12);
      font-weight: 900;
      font-size: 13px;
      cursor:pointer;
      transition: transform .15s ease, background .15s ease, border-color .15s ease;
      user-select:none;
      display:inline-flex;
      align-items:center;
      gap:8px;
      white-space:nowrap;
      box-shadow: 0 10px 20px rgba(2,6,23,.06);
    }
    .btn:hover{
      transform: translateY(-1px);
      background: rgba(255,255,255,.95);
      border-color: var(--border2);
    }
    .btn-primary{
      border-color: rgba(37,99,235,.25);
      background: linear-gradient(135deg, rgba(37,99,235,.16), rgba(56,189,248,.12));
      color: rgba(15,23,42,.92);
    }

    /* Notification */
    .notification{
      position:relative;
      cursor:pointer;
      width: 42px; height: 42px;
      display:grid; place-items:center;
      border-radius: var(--r14);
      border: 1px solid var(--border);
      background: rgba(255,255,255,.85);
      transition: transform .15s ease, background .15s ease, border-color .15s ease;
      box-shadow: 0 10px 20px rgba(2,6,23,.06);
    }
    .notification:hover{ transform: translateY(-1px); background: rgba(255,255,255,.96); border-color: var(--border2); }
    .notification i{ font-size: 18px; color: rgba(15,23,42,.78); }
    .notification-count{
      position:absolute;
      top:-6px; right:-6px;
      background: rgba(37,99,235,.95);
      color:white;
      width:18px; height:18px;
      font-size: 11px;
      border-radius: 99px;
      display:grid; place-items:center;
      border: 1px solid rgba(255,255,255,.60);
      box-shadow: 0 10px 24px rgba(37,99,235,.20);
      font-weight: 900;
    }

    /* Cards */
    .dashboard-cards{
      margin-top: 14px;
      display:grid;
      grid-template-columns: repeat(4, minmax(220px, 1fr));
      gap: 12px;
    }
    @media (max-width: 1200px){ .dashboard-cards{ grid-template-columns: repeat(2, minmax(220px, 1fr)); } }
    @media (max-width: 720px){ .dashboard-cards{ grid-template-columns: 1fr; } }

    .card{
      border-radius: var(--r18);
      border: 1px solid var(--border);
      background: rgba(255,255,255,.78);
      backdrop-filter: blur(14px);
      box-shadow: var(--shadow2);
      padding: 14px;
      transition: transform .15s ease, background .15s ease, border-color .15s ease;
    }
    .card:hover{ transform: translateY(-2px); background: rgba(255,255,255,.92); border-color: var(--border2); }
    .card-header{
      display:flex; align-items:center; justify-content:space-between; gap:10px;
      margin-bottom: 10px;
    }
    .card-title{ font-size: 13px; font-weight: 900; color: rgba(15,23,42,.88); }
    .card-icon{
      width:44px; height:44px;
      border-radius: var(--r14);
      display:grid; place-items:center;
      border: 1px solid rgba(37,99,235,.18);
      background: rgba(37,99,235,.07);
      color: rgba(37,99,235,.92);
    }
    .card-icon.interviews{ border-color: rgba(56,189,248,.20); background: rgba(56,189,248,.09); color: rgba(2,132,199,.95); }
    .card-icon.onboarding{ border-color: rgba(22,163,74,.20); background: rgba(22,163,74,.09); color: rgba(22,163,74,.95); }
    .card-icon.ai-assistant{ border-color: rgba(37,99,235,.18); background: linear-gradient(135deg, rgba(37,99,235,.09), rgba(56,189,248,.10)); }

    .card-value{ font-size: 24px; font-weight: 900; letter-spacing: -.2px; }
    .card-desc{ margin-top: 6px; font-size: 12px; color: var(--muted); font-weight: 700; line-height: 1.4; }

    /* Section title */
    .section-title{
      margin-top: 14px;
      font-size: 14px;
      font-weight: 900;
      color: rgba(15,23,42,.90);
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
    }
    .section-title span{ color: var(--muted); font-size: 12px; font-weight: 800; }

    /* Trackers */
    .trackers-container{
      margin-top: 10px;
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
      align-items:start;
    }
    @media (max-width: 1100px){ .trackers-container{ grid-template-columns: 1fr; } }

    .tracker{
      border-radius: var(--r18);
      border: 1px solid var(--border);
      background: rgba(255,255,255,.78);
      backdrop-filter: blur(14px);
      box-shadow: var(--shadow2);
      padding: 14px;
      overflow:hidden;
    }

    .tracker-header{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:10px;
      margin-bottom: 12px;
    }
    .tracker-title{ font-size: 13px; font-weight: 900; color: rgba(15,23,42,.88); }
    .tracker-subtitle{ font-size: 12px; font-weight: 800; color: var(--muted); margin-top: 4px; }

    /* status bar */
    .status-bar{
      display:flex;
      justify-content:space-between;
      position:relative;
      margin: 10px 0 14px;
      gap: 10px;
    }
    .status-bar::before{
      content:'';
      position:absolute;
      top: 16px;
      left: 6%;
      width: 88%;
      height: 4px;
      border-radius: 999px;
      background: rgba(15,23,42,.10);
      z-index: 1;
    }
    .status-step{
      display:flex;
      flex-direction:column;
      align-items:center;
      position:relative;
      z-index:2;
      width:25%;
    }
    .status-dot{
      width:34px; height:34px;
      border-radius: 99px;
      display:grid; place-items:center;
      font-size: 13px;
      font-weight: 900;
      background: rgba(15,23,42,.06);
      color: rgba(15,23,42,.55);
      border: 1px solid rgba(15,23,42,.10);
      box-shadow: 0 0 0 6px rgba(15,23,42,.03);
    }
    .status-dot.active{
      background: rgba(37,99,235,.12);
      border-color: rgba(37,99,235,.26);
      color: rgba(15,23,42,.90);
      box-shadow: 0 0 0 6px rgba(37,99,235,.10);
    }
    .status-dot.completed{
      background: rgba(37,99,235,.92);
      border-color: rgba(37,99,235,.42);
      color: white;
      box-shadow: 0 0 0 6px rgba(37,99,235,.12);
    }
    .status-dot.rejected{
      background: rgba(239,68,68,.10);
      border-color: rgba(239,68,68,.26);
      color: rgba(15,23,42,.92);
      box-shadow: 0 0 0 6px rgba(239,68,68,.08);
    }
    .status-label{
      margin-top: 8px;
      font-size: 11px;
      font-weight: 800;
      color: rgba(15,23,42,.65);
      text-align:center;
    }

    /* list items */
    .applications-list{
      list-style:none;
      border-radius: var(--r14);
      border: 1px solid rgba(15,23,42,.10);
      overflow:hidden;
      background: rgba(255,255,255,.70);
    }
    .application-item{
      display:flex;
      justify-content:space-between;
      align-items:center;
      padding: 12px;
      border-bottom: 1px solid rgba(15,23,42,.08);
      transition: background .15s ease;
      gap:12px;
    }
    .application-item:last-child{ border-bottom: none; }
    .application-item:hover{ background: rgba(37,99,235,.04); }

    .job-title{ font-weight: 900; font-size: 13px; color: rgba(15,23,42,.90); margin-bottom: 4px; }
    .company-name{ font-size: 12px; color: var(--muted); font-weight: 700; }

    .application-status{
      padding: 6px 10px;
      border-radius: 999px;
      font-size: 12px;
      font-weight: 900;
      border: 1px solid rgba(15,23,42,.10);
      background: rgba(15,23,42,.04);
      color: rgba(15,23,42,.80);
      white-space:nowrap;
      flex:0 0 auto;
    }
    .status-applied{ border-color: rgba(56,189,248,.30); background: rgba(56,189,248,.14); }
    .status-review{ border-color: rgba(245,158,11,.30); background: rgba(245,158,11,.16); }
    .status-accepted{ border-color: rgba(22,163,74,.30); background: rgba(22,163,74,.14); }
    .status-rejected{ border-color: rgba(239,68,68,.30); background: rgba(239,68,68,.14); }

    /* onboarding action buttons */
    .onboarding-actions{ display:flex; gap:8px; margin-left: 12px; flex:0 0 auto; }
    .action-btn{
      padding: 8px 12px;
      border-radius: var(--r12);
      border: 1px solid rgba(15,23,42,.10);
      background: rgba(255,255,255,.85);
      color: rgba(15,23,42,.88);
      font-weight: 900;
      cursor:pointer;
      transition: transform .15s ease, background .15s ease, border-color .15s ease;
      font-size: 12px;
      white-space:nowrap;
      box-shadow: 0 10px 20px rgba(2,6,23,.06);
    }
    .action-btn:hover{ transform: translateY(-1px); background: rgba(255,255,255,.96); border-color: rgba(15,23,42,.14); }
    .done-btn{ border-color: rgba(22,163,74,.22); background: rgba(22,163,74,.10); }
    .issue-btn{ border-color: rgba(245,158,11,.22); background: rgba(245,158,11,.12); }

    /* AI Assistant button */
    .ai-assistant-btn{
      position: fixed;
      bottom: 24px;
      right: 24px;
      width: 62px;
      height: 62px;
      border-radius: 22px;
      background:
        radial-gradient(16px 16px at 30% 30%, rgba(255,255,255,.30), transparent 55%),
        linear-gradient(135deg, rgba(37,99,235,.92), rgba(56,189,248,.82));
      color: white;
      display:grid;
      place-items:center;
      font-size: 22px;
      cursor:pointer;
      box-shadow: 0 18px 60px rgba(37,99,235,.25);
      z-index: 100;
      transition: transform .15s ease;
    }
    .ai-assistant-btn:hover{ transform: translateY(-2px); }

    /* AI Popup */
    .ai-popup{
      position: fixed;
      bottom: 98px;
      right: 24px;
      width: 420px;
      height: 620px;
      border-radius: var(--r22);
      border: 1px solid rgba(15,23,42,.10);
      background: rgba(255,255,255,.92);
      backdrop-filter: blur(14px);
      box-shadow: 0 26px 90px rgba(2,6,23,.20);
      z-index: 100;
      display:none;
      flex-direction: column;
      overflow:hidden;
    }
    .ai-popup.active{ display:flex; }

    .ai-header{
      padding: 14px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      border-bottom: 1px solid rgba(15,23,42,.10);
      background: linear-gradient(135deg, rgba(37,99,235,.10), rgba(56,189,248,.10));
    }
    .ai-header h3{
      font-size: 13px;
      font-weight: 900;
      letter-spacing:.2px;
      consider: unset;
    }
    .close-ai{
      width: 38px; height: 38px;
      border-radius: var(--r14);
      border: 1px solid rgba(15,23,42,.12);
      background: rgba(255,255,255,.85);
      color: rgba(15,23,42,.85);
      cursor:pointer;
      font-size: 18px;
      box-shadow: 0 10px 20px rgba(2,6,23,.06);
    }
    .close-ai:hover{ background: rgba(255,255,255,.96); }

    .ai-chat-container{
      flex:1;
      padding: 14px;
      overflow-y:auto;
      display:flex;
      flex-direction:column;
      gap:10px;
      background: rgba(255,255,255,.88);
    }
    .ai-message{
      max-width: 82%;
      padding: 10px 12px;
      border-radius: 16px;
      line-height: 1.35;
      font-size: 12.5px;
      font-weight: 700;
      border: 1px solid rgba(15,23,42,.08);
    }
    .ai-message.bot{
      align-self:flex-start;
      background: rgba(15,23,42,.04);
      color: rgba(15,23,42,.88);
      border-top-left-radius: 6px;
    }
    .ai-message.user{
      align-self:flex-end;
      background: linear-gradient(135deg, rgba(37,99,235,.18), rgba(56,189,248,.16));
      color: rgba(15,23,42,.92);
      border-top-right-radius: 6px;
      border-color: rgba(37,99,235,.18);
    }

    .ai-input-container{
      padding: 12px;
      border-top: 1px solid rgba(15,23,42,.10);
      display:flex;
      gap:10px;
      background: rgba(255,255,255,.92);
    }
    .ai-input{
      flex:1;
      padding: 12px 14px;
      border: 1px solid rgba(15,23,42,.12);
      background: rgba(255,255,255,.92);
      color: rgba(15,23,42,.90);
      border-radius: 999px;
      outline:none;
      font-size: 13px;
      font-weight: 700;
    }
    .ai-input::placeholder{ color: rgba(15,23,42,.45); }
    .ai-input:focus{
      border-color: rgba(37,99,235,.28);
      box-shadow: 0 0 0 6px rgba(37,99,235,.10);
    }
    .ai-send-btn{
      width: 46px;
      height: 46px;
      border-radius: 16px;
      border: 1px solid rgba(37,99,235,.25);
      background: linear-gradient(135deg, rgba(37,99,235,.16), rgba(56,189,248,.14));
      color: rgba(15,23,42,.90);
      cursor:pointer;
      display:grid;
      place-items:center;
      font-size: 16px;
      transition: transform .15s ease;
      box-shadow: 0 10px 20px rgba(2,6,23,.06);
    }
    .ai-send-btn:hover{ transform: translateY(-1px); }

    /* Responsive */
    @media (max-width: 992px){
      .container{ flex-direction:column; }
      .sidebar{
        width:100%;
        flex-direction:row;
        align-items:center;
        gap:12px;
      }
      .nav-menu{
        flex-direction:row;
        overflow:auto;
        gap:6px;
        padding: 10px 0;
      }
      .user-info{ margin-top:0; }
    }
    @media (max-width: 768px){
      .ai-popup{
        width: calc(100% - 24px);
        right: 12px;
        left: 12px;
        height: 560px;
      }
      .main-content{ padding: 12px; }
    }
  </style>
</head>

<body>
  <div class="container">
    <!-- Sidebar -->
    <div class="sidebar">
      <div class="logo">
        <i class="fas fa-briefcase"></i>
        <h2>
          CareerPortal
          <span>Candidate</span>
        </h2>
      </div>

      <ul class="nav-menu">
        <li><a href="#" class="active"><i class="fas fa-home"></i> Dashboard</a></li>
        <li><a href="#"><i class="fas fa-search"></i> Job Search</a></li>
        <li><a href="#"><i class="fas fa-file-upload"></i> Resume Upload</a></li>
        <li><a href="#"><i class="fas fa-comments"></i> AI Assistant</a></li>
        <li><a href="#"><i class="fas fa-cog"></i> Settings</a></li>
      </ul>

      <div class="user-info">
        <div class="user-avatar" id="userInitials">JS</div>
        <div class="user-details">
          <h4 id="userName">John Smith</h4>
          <p>Candidate</p>
        </div>
      </div>
    </div>

    <!-- Main -->
    <div class="main-content">
      <div class="topbar">
        <h1>
          Candidate Dashboard
          <span id="stageLine">Status: —</span>
        </h1>

        <div class="header-actions">
          <div class="pill"><span class="pulse"></span> Live</div>

          <div class="notification" id="notifBell" title="Notifications">
            <i class="fas fa-bell"></i>
            <span class="notification-count" id="notifCount">3</span>
          </div>

          <button class="btn btn-primary" onclick="logout()">
            <i class="fas fa-sign-out-alt"></i> Logout
          </button>
        </div>
      </div>

      <!-- Cards -->
      <div class="dashboard-cards">
        <div class="card">
          <div class="card-header">
            <div class="card-title">Active applications</div>
            <div class="card-icon"><i class="fas fa-file-alt"></i></div>
          </div>
          <div class="card-value" id="cardApps">3</div>
          <div class="card-desc">Applications currently in progress</div>
        </div>

        <div class="card">
          <div class="card-header">
            <div class="card-title">Upcoming interviews</div>
            <div class="card-icon interviews"><i class="fas fa-calendar-check"></i></div>
          </div>
          <div class="card-value" id="cardInterviews">1</div>
          <div class="card-desc">Scheduled interviews (next 14 days)</div>
        </div>

        <div class="card" id="onboardingCard">
          <div class="card-header">
            <div class="card-title">Onboarding tasks</div>
            <div class="card-icon onboarding"><i class="fas fa-clipboard-check"></i></div>
          </div>
          <div class="card-value" id="cardOnboarding">—</div>
          <div class="card-desc" id="cardOnboardingDesc">Appears after your offer is accepted</div>
        </div>

        <div class="card">
          <div class="card-header">
            <div class="card-title">AI Assistant</div>
            <div class="card-icon ai-assistant"><i class="fas fa-robot"></i></div>
          </div>
          <div class="card-value">24/7</div>
          <div class="card-desc">Resume, applications, interview prep</div>
        </div>
      </div>

      <!-- Trackers -->
      <h2 class="section-title">
        Progress
        <span>updates based on your stage</span>
      </h2>

      <div class="trackers-container">
        <!-- Application Tracker -->
        <div class="tracker" id="applicationTracker">
          <div class="tracker-header">
            <div>
              <div class="tracker-title">Application status</div>
              <div class="tracker-subtitle" id="appSubtitle">Current: —</div>
            </div>
            <div class="pill" id="appPill">
              <span class="pulse" style="background:var(--blue);box-shadow:0 0 0 6px rgba(37,99,235,.12)"></span>
              Active
            </div>
          </div>

          <div class="status-bar" id="appStatusBar">
            <div class="status-step">
              <div class="status-dot" data-step="applied">1</div>
              <div class="status-label">Applied</div>
            </div>
            <div class="status-step">
              <div class="status-dot" data-step="review">2</div>
              <div class="status-label">In Review</div>
            </div>
            <div class="status-step">
              <div class="status-dot" data-step="interview">3</div>
              <div class="status-label">Interview</div>
            </div>
            <div class="status-step">
              <div class="status-dot" data-step="decision">4</div>
              <div class="status-label">Decision</div>
            </div>
          </div>

          <ul class="applications-list" id="appsList">
            <li class="application-item">
              <div>
                <div class="job-title">Product Manager</div>
                <div class="company-name">GrowthStart LLC</div>
              </div>
              <div class="application-status status-review">In Review</div>
            </li>
            <li class="application-item">
              <div>
                <div class="job-title">UX/UI Designer</div>
                <div class="company-name">Creative Solutions Ltd.</div>
              </div>
              <div class="application-status status-applied">Applied</div>
            </li>
            <li class="application-item">
              <div>
                <div class="job-title">Data Analyst</div>
                <div class="company-name">Tech Innovations Inc.</div>
              </div>
              <div class="application-status status-accepted">Accepted</div>
            </li>
          </ul>
        </div>

        <!-- Onboarding Tracker (only if accepted) -->
        <div class="tracker" id="onboardingTracker">
          <div class="tracker-header">
            <div>
              <div class="tracker-title">Onboarding</div>
              <div class="tracker-subtitle" id="onboardSubtitle">Your checklist</div>
            </div>
            <div class="pill">
              <span class="pulse" style="background:var(--ok);box-shadow:0 0 0 6px rgba(22,163,74,.14)"></span>
              Active
            </div>
          </div>

          <div class="status-bar" id="onboardStatusBar">
            <div class="status-step">
              <div class="status-dot" data-step="offer">✓</div>
              <div class="status-label">Offer</div>
            </div>
            <div class="status-step">
              <div class="status-dot" data-step="visa">2</div>
              <div class="status-label">Visa</div>
            </div>
            <div class="status-step">
              <div class="status-dot" data-step="medical">3</div>
              <div class="status-label">Medical</div>
            </div>
            <div class="status-step">
              <div class="status-dot" data-step="nda">4</div>
              <div class="status-label">NDA</div>
            </div>
          </div>

          <div class="application-item">
            <div>
              <div class="job-title">Upload documents</div>
              <div class="company-name">Passport, visa info, photo</div>
            </div>
            <div class="onboarding-actions">
              <button class="action-btn done-btn">Done</button>
              <button class="action-btn issue-btn">Issue</button>
            </div>
          </div>

          <div class="application-item">
            <div>
              <div class="job-title">Medical check</div>
              <div class="company-name">Book appointment</div>
            </div>
            <div class="onboarding-actions">
              <button class="action-btn done-btn">Done</button>
              <button class="action-btn issue-btn">Issue</button>
            </div>
          </div>

          <div class="application-item">
            <div>
              <div class="job-title">Sign NDA</div>
              <div class="company-name">Digital signature required</div>
            </div>
            <div class="onboarding-actions">
              <button class="action-btn done-btn">Done</button>
              <button class="action-btn issue-btn">Issue</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- AI Assistant Button -->
  <div class="ai-assistant-btn" id="aiAssistantBtn" title="AI Assistant">
    <i class="fas fa-robot"></i>
  </div>

  <!-- AI Popup -->
  <div class="ai-popup" id="aiPopup">
    <div class="ai-header">
      <h3>AI Career Assistant</h3>
      <button class="close-ai" id="closeAiBtn">&times;</button>
    </div>

    <div class="ai-chat-container" id="aiChat">
      <div class="ai-message bot">Hi! I can help you find roles, tailor your resume, and prep for interviews.</div>
      <div class="ai-message bot">What role are you targeting, and what’s your location preference?</div>
      <div class="ai-message user">Product Manager, UAE</div>
      <div class="ai-message bot">Noted. I’ll suggest roles and help you tailor applications.</div>
    </div>

    <div class="ai-input-container">
      <input type="text" class="ai-input" id="aiInput" placeholder="Type your message...">
      <button class="ai-send-btn" id="aiSendBtn"><i class="fas fa-paper-plane"></i></button>
    </div>
  </div>

  <script>
    /* ============
      STAGE (hook this to backend)
      review | interview | decision | accepted | rejected
    ============ */
    const applicationStage = "review";

    const stageMeta = {
      review:    { label:"In Review",  activeStep:"review",    pillText:"Active",   pillColor:"var(--blue)" },
      interview: { label:"Interview",  activeStep:"interview", pillText:"Active",   pillColor:"var(--blue)" },
      decision:  { label:"Decision",   activeStep:"decision",  pillText:"Active",   pillColor:"var(--blue)" },
      accepted:  { label:"Accepted",   activeStep:"decision",  pillText:"Accepted", pillColor:"var(--ok)" },
      rejected:  { label:"Rejected",   activeStep:"decision",  pillText:"Closed",   pillColor:"var(--bad)" }
    };

    function setApplicationTracker(stage){
      const meta = stageMeta[stage] || stageMeta.review;

      document.getElementById("stageLine").textContent = "Status: " + meta.label;
      document.getElementById("appSubtitle").textContent = "Current: " knowsLabel(meta.label);

      const pill = document.getElementById("appPill");
      pill.innerHTML = `
        <span class="pulse" style="background:${meta.pillColor};box-shadow:0 0 0 6px rgba(37,99,235,.12)"></span>
        ${meta.pillText}
      `;

      // Steps
      const dots = document.querySelectorAll('#appStatusBar .status-dot');
      dots.forEach(d => {
        d.classList.remove("active","completed","rejected");
        const key = d.getAttribute("data-step");

        // mark completed progressively
        if(key === "applied") d.classList.add("completed");
        if(stage !== "review" && key === "review") d.classList.add("completed");
        if((stage === "interview" || stage === "decision" || stage === "accepted" || stage === "rejected") && key === "interview") d.classList.add("completed");

        // active step
        if(key === meta.activeStep && stage !== "accepted" && stage !== "rejected") d.classList.add("active");

        // accepted / rejected visual on last step
        if(stage === "accepted" && key === "decision"){
          d.classList.remove("active");
          d.classList.add("completed");
          d.textContent = "✓";
        }
        if(stage === "rejected" && key === "decision"){
          d.classList.remove("active","completed");
          d.classList.add("rejected");
          d.textContent = "×";
        }
      });

      // Onboarding visibility + card logic
      const onboardingTracker = document.getElementById("onboardingTracker");
      const onboardingCardValue = document.getElementById("cardOnboarding");
      const onboardingCardDesc = document.getElementById("cardOnboardingDesc");

      if(stage === "accepted"){
        onboardingTracker.style.display = "";
        onboardingCardValue.textContent = "3";
        onboardingCardDesc.textContent = "Tasks pending for your start date";
      } else {
        onboardingTracker.style.display = "none";
        onboardingCardValue.textContent = "—";
        onboardingCardDesc.textContent = "Appears after your offer is accepted";
      }
    }

    function knowsLabel(label){ return label; } // tiny helper so it's easy to change formatting

    /* AI Assistant Toggle */
    const aiAssistantBtn = document.getElementById('aiAssistantBtn');
    const aiPopup = document.getElementById('aiPopup');
    const closeAiBtn = document.getElementById('closeAiBtn');
    const aiSendBtn = document.getElementById('aiSendBtn');
    const aiInput = document.getElementById('aiInput');
    const aiChat = document.getElementById('aiChat');

    aiAssistantBtn.addEventListener('click', () => aiPopup.classList.add('active'));
    closeAiBtn.addEventListener('click', () => aiPopup.classList.remove('active'));

    aiSendBtn.addEventListener('click', sendAiMessage);
    aiInput.addEventListener('keypress', (e) => { if (e.key === 'Enter') sendAiMessage(); });

    function sendAiMessage() {
      const message = aiInput.value.trim();
      if (!message) return;

      const userMessage = document.createElement('div');
      userMessage.className = 'ai-message user';
      userMessage.textContent = message;
      aiChat.appendChild(userMessage);
      aiInput.value = '';
      aiChat.scrollTop = aiChat.scrollHeight;

      setTimeout(() => {
        const botMessage = document.createElement('div');
        botMessage.className = 'ai-message bot';
        botMessage.textContent = "Got it — I can help tailor your next application or prep interview answers. What role is this for?";
        aiChat.appendChild(botMessage);
        aiChat.scrollTop = aiChat.scrollHeight;
      }, 650);
    }

    /* Onboarding buttons */
    document.querySelectorAll('.done-btn').forEach(button => {
      button.addEventListener('click', function() {
        const taskItem = this.closest('.application-item');
        const taskName = taskItem.querySelector('.job-title').textContent;
        alert(`Marked "${taskName}" as done. HR will be notified.`);
        this.textContent = "Completed";
        this.disabled = true;
        this.style.opacity = .75;
      });
    });

    document.querySelectorAll('.issue-btn').forEach(button => {
      button.addEventListener('click', function() {
        const taskItem = this.closest('.application-item');
        const taskName = taskItem.querySelector('.job-title').textContent;
        alert(`Reported an issue with "${taskName}". HR and the appropriate team have been notified.`);
      });
    });

    function logout() {
      if (confirm('Are you sure you want to logout?')) {
        window.location.href = 'career-page.html';
      }
    }

    document.getElementById('notifBell').addEventListener('click', function() {
      alert("Notifications:\n1. Application moved to In Review\n2. New job match available\n3. Resume tip: Add measurable impact");
    });

    /* INIT */
    setApplicationTracker(applicationStage);
  </script>
</body>
</html>
